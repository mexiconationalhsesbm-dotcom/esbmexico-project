(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{980:(e,t,r)=>{Promise.resolve().then(r.bind(r,5296)),Promise.resolve().then(r.bind(r,2173)),Promise.resolve().then(r.bind(r,3708))},1154:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return n},getImageProps:function(){return i}});let a=r(8229),s=r(8883),l=r(3063),d=a._(r(1193));function i(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:d.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let n=l.Image},2173:(e,t,r)=>{"use strict";r.d(t,{StorageOverviewCard:()=>i});var a=r(5155),s=r(2115),l=r(6695),d=r(1154);function i(){let[e,t]=(0,s.useState)(null),[r,i]=(0,s.useState)(!0),[n,o]=(0,s.useState)(null);if((0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/storage/overall");if(!e.ok)throw Error("Failed to fetch storage data");let r=await e.json();t(r)}catch(e){o(e.message)}finally{i(!1)}})()},[]),r)return(0,a.jsxs)(l.Zp,{className:"bg-white dark:bg-gray-800 rounded-2xl text-gray-900 dark:text-white dark:border-gray-700",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Storage Overview"})}),(0,a.jsx)(l.Wu,{className:"flex items-center justify-center py-8",children:(0,a.jsx)(d.A,{className:"h-6 w-6 animate-spin text-muted-foreground"})})]});if(n||!e)return(0,a.jsxs)(l.Zp,{className:"bg-white dark:bg-gray-800 rounded-2xl text-gray-900 dark:text-white dark:border-gray-700",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Storage Overview"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("p",{className:"text-sm text-destructive",children:n||"Failed to load storage data"})})]});let c=e.totalStorageUsed.toFixed(2),x=e.percentageUsed.toFixed(1),m="bg-green-500";return e.percentageUsed>80?m="bg-red-500":e.percentageUsed>60&&(m="bg-yellow-500"),(0,a.jsxs)(l.Zp,{className:"bg-white dark:bg-gray-800 rounded-2xl text-gray-900 dark:text-white dark:border-gray-700",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Storage Overview"}),(0,a.jsx)(l.BT,{children:"Total storage usage across all dimensions"})]}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Storage Used"}),(0,a.jsxs)("span",{className:"font-semibold",children:[c," GB / ",e.totalStorageLimit," GB"]})]}),(0,a.jsx)("div",{className:"h-3 w-full bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full ".concat(m," rounded-full transition-all duration-500"),style:{width:"".concat(e.percentageUsed,"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground text-right",children:[x,"% used"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Files"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.totalFiles})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Available Space"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[(e.totalStorageLimit-e.totalStorageUsed).toFixed(2)," GB"]})]})]})]})]})}},2596:(e,t,r)=>{"use strict";function a(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,a,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t)if(Array.isArray(t)){var l=t.length;for(r=0;r<l;r++)t[r]&&(a=e(t[r]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}(e))&&(a&&(a+=" "),a+=t);return a}r.d(t,{$:()=>a})},3708:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var a=r(5155),s=r(5127),l=r(6766),d=r(2115),i=r(6874),n=r.n(i);function o(e){let{files:t}=e;(0,d.useRef)(null);let r=e=>e.includes("pdf")?"/images/icons/pdf.svg":e.includes("word")||e.includes("doc")?"/images/icons/doc-icon.svg":e.includes("excel")||e.includes("xls")?"/images/icons/excel-icon.svg":e.includes("powerpoint")||e.includes("ppt")?"/images/icons/ppt-icon.svg":e.includes("text")||e.includes("txt")?"/images/icons/txt-icon.svg":"/images/icons/file-icon.svg",[i,o]=(0,d.useState)(null);return(0,a.jsxs)("div",{className:"overflow-hidden rounded-2xl border border-gray-200 bg-white px-4 pb-3 pt-4 dark:border-gray-800 dark:bg-white/[0.03] sm:px-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 mb-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white/90",children:"Recent Files"})}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)(n(),{href:"/dashboard/all-documents",className:"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-6 py-2.5 text-theme-sm font-medium text-gray-700 shadow-theme-xs hover:bg-gray-50 hover:text-gray-800 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] dark:hover:text-gray-200",children:"See all"})})]}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-white/[0.05] dark:bg-white/[0.03]",children:(0,a.jsx)("div",{className:"max-w-full overflow-x-auto",children:(0,a.jsx)("div",{className:"min-w-[1102px]",children:(0,a.jsxs)(s.XI,{children:[(0,a.jsx)(s.A0,{className:"border-b border-gray-100 dark:border-white/[0.05]",children:(0,a.jsxs)(s.Hj,{children:[(0,a.jsx)(s.nA,{className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Document"}),(0,a.jsx)(s.nA,{className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Dimension"}),(0,a.jsx)(s.nA,{className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Upload Date"}),(0,a.jsx)(s.nA,{className:"px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400",children:"Size"})]})}),(0,a.jsx)(s.BF,{className:"divide-y divide-gray-100 dark:divide-white/[0.05]",children:t.map(e=>{var t,d;return(0,a.jsxs)(s.Hj,{children:[(0,a.jsx)(s.nA,{className:"px-5 py-4 sm:px-6 text-start",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 flex items-center",children:(0,a.jsx)(l.default,{width:30,height:30,src:r(e.file_type),alt:e.name})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block font-medium text-gray-800 text-theme-sm dark:text-white/90",children:e.name}),(0,a.jsx)("span",{className:"block text-gray-500 text-theme-xs dark:text-gray-400",children:(null==(t=e.folder)?void 0:t.name)||"-"})]})]})}),(0,a.jsx)(s.nA,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:(null==(d=e.dimension)?void 0:d.name)||"N/A"}),(0,a.jsx)(s.nA,{className:"px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400",children:new Date(e.created_at).toLocaleString()}),(0,a.jsx)(s.nA,{className:"px-4 py-3 text-gray-500 text-theme-sm dark:text-gray-400",children:e.file_size?"".concat(Math.round(e.file_size/1024)," KB"):"-"})]},e.id)})})]})})})})})]})}},5127:(e,t,r)=>{"use strict";r.d(t,{A0:()=>i,BF:()=>n,Hj:()=>o,XI:()=>d,nA:()=>x,nd:()=>c});var a=r(5155),s=r(2115),l=r(6707);let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",r),...s})})});d.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",r),...s})});i.displayName="TableHeader";let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",r),...s})});n.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});o.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});c.displayName="TableHead";let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});x.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},5296:(e,t,r)=>{"use strict";r.d(t,{StorageByDimensionTable:()=>n});var a=r(5155),s=r(2115),l=r(6695),d=r(5127),i=r(1154);function n(){let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(!0),[o,c]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/storage/by-dimension");if(!e.ok)throw Error("Failed to fetch dimension storage data");let r=await e.json();t(r.sort((e,t)=>t.totalStorageGB-e.totalStorageGB))}catch(e){c(e.message)}finally{n(!1)}})()},[]),r)?(0,a.jsxs)(l.Zp,{className:"bg-white dark:bg-gray-800 rounded-2xl text-gray-900 dark:text-white dark:border-gray-700",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Storage by Dimension"}),(0,a.jsx)(l.BT,{children:"Breakdown of storage usage across each dimension"})]}),(0,a.jsx)(l.Wu,{className:"flex items-center justify-center py-8",children:(0,a.jsx)(i.A,{className:"h-6 w-6 animate-spin text-muted-foreground"})})]}):o?(0,a.jsxs)(l.Zp,{className:"bg-white dark:bg-gray-800 rounded-2xl text-gray-900 dark:text-white dark:border-gray-700",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Storage by Dimension"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("p",{className:"text-sm text-destructive",children:o})})]}):(0,a.jsxs)(l.Zp,{className:"bg-white dark:bg-gray-800 rounded-2xl text-gray-900 dark:text-white dark:border-gray-700",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Storage by Dimension"}),(0,a.jsx)(l.BT,{children:"Breakdown of storage usage across each dimension"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)(d.XI,{children:[(0,a.jsx)(d.A0,{children:(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(d.nd,{children:"Dimension"}),(0,a.jsx)(d.nd,{className:"text-right",children:"Storage Used (GB)"}),(0,a.jsx)(d.nd,{className:"text-right",children:"Total Files"})]})}),(0,a.jsx)(d.BF,{children:0===e.length?(0,a.jsx)(d.Hj,{children:(0,a.jsx)(d.nA,{colSpan:3,className:"text-center text-muted-foreground py-8",children:"No storage data available"})}):e.map(e=>(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(d.nA,{className:"font-medium",children:e.dimension_name}),(0,a.jsxs)(d.nA,{className:"text-right",children:[e.totalStorageGB.toFixed(2)," GB"]}),(0,a.jsx)(d.nA,{className:"text-right",children:e.totalFiles})]},e.dimension_id))})]})})]})}},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>n,Zp:()=>d,aR:()=>i});var a=r(5155),s=r(2115),l=r(6707);let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});d.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});n.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},6707:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var a=r(2596),s=r(9688);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},6766:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var a=r(1469),s=r.n(a)},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var a=r(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),d=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},n=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:c="",children:x,iconNode:m,...h}=e;return(0,a.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:r,strokeWidth:d?24*Number(l)/Number(s):l,className:i("lucide",c),...!x&&!n(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(x)?x:[x]])}),x=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:n,...o}=r;return(0,a.createElement)(c,{ref:l,iconNode:t,className:i("lucide-".concat(s(d(e))),"lucide-".concat(e),n),...o})});return r.displayName=d(e),r}}},e=>{var t=t=>e(e.s=t);e.O(0,[9688,3063,6874,8441,1684,7358],()=>t(980)),_N_E=e.O()}]);